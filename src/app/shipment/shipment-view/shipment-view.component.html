<div class="opti_container position-relative bg-white rounded">
    <form class="form-with-fix-btnBar" *ngIf="!viewLines">
        <div class="opti_container_inner" [perfectScrollbar]=" ">
            <h3 *ngIf="fromScreen == 'shipment'" class="border-bottom d-flex pt-1 pb-3 mb-4">
                {{'DropdownMenu_Shipment'|translate}}
            </h3>
            <h3 *ngIf="fromScreen == 'archiveddata'" class="border-bottom d-flex pt-1 pb-3 mb-4">
                {{'ArchievedData'|translate}}
            </h3>
            <div class="row">
                <div class="col-12">
                    <!-- Shipment From -->
                    <div class="shipment-form">
                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ShipmentCode" class="col-sm-4 col-form-label">{{'Shipment_Code'|translate}}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group ">
                                            <input type="text" class="form-control form-control-sm" name='ShipmentCode' [(ngModel)]=ShipmentCode id="ShipmentCode" (blur)="IsValidShipmentCode()">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetShipmentIdForShipment()">
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="WarehouseCode" class="col-sm-4 col-form-label">{{'WHSCODE'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='WarehouseCode' [(ngModel)]=WarehouseCode id="WarehouseCode"
                                            [disabled]=true>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ScheduleDatetime" class="col-sm-4 col-form-label">{{'Schedule_Datetime'|translate}}</label>
                                    <div class="col-sm-8">
                                        <kendo-datepicker name="ScheduleDatetime" [(ngModel)]=ScheduleDatetime [format]=dateFormat [value]="defaultDateValue" placeholder={{dateFormat}}
                                            (valueChange)="onScheduleDateChange($event)" [disabled]="isarchived"></kendo-datepicker>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                        <!-- row end -->

                        <!-- row start -->
                        <div class="row">

                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="CustomerCode" class="col-sm-4 col-form-label">{{'CustomerCode'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='CustomerCode' [(ngModel)]=CustomerCode [disabled]=true id="CustomerCode">
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->

                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ShipStageBin" class="col-sm-4 col-form-label">
                                        {{'Ship_Stage_Bin'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='ShipStageBin' [(ngModel)]=ShipStageBin id="ShipStageBin" [disabled]=true>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="DockDoor" class="col-sm-4 col-form-label">{{'Dock_Door'|translate}}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group ">
                                            <input type="text" class="form-control form-control-sm" name='DockDoor' [(ngModel)]=DockDoor id="DockDoor" (blur)="IsValidDockDoor()" [disabled]="isarchived">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForDockDoor('CT')" [disabled]="isarchived">
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                        <!-- row end -->


                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ShipToCode" class="col-sm-4 col-form-label">{{'Ship_To_Code'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='ShipToCode' [(ngModel)]=ShipToCode id="ShipToCode" [disabled]=true>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="Status" class="col-sm-4 col-form-label">{{'Status'|translate}}</label>
                                    <div class="col-sm-8">
                                        <kendo-dropdownlist class="form-control form-control-sm" [data]="shiment_status_array" id="Status" name="Status" [disabled]=true
                                            [(ngModel)]="Status" #selectedvalue (selectionChange)="onCreateModeSelectChange($event)"></kendo-dropdownlist>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="CarrierCode" class="col-sm-4 col-form-label">{{'DropdownMenu_CarrierCode'|translate}}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group ">
                                            <input type="text" class="form-control form-control-sm" name='CarrierCode' [(ngModel)]=CarrierCode id="CarrierCode" (blur)="IsValidCarrier()" [disabled]="isarchived">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForCarrier('CT')" [disabled]="isarchived">
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                        <!-- row end -->

                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ReturnOrderRef" class="col-sm-4 col-form-label">{{'Return_Order_Ref'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='ReturnOrderRef' [(ngModel)]=ReturnOrderRef id="ReturnOrderRef" [disabled]="isarchived">
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="BOLNumber" class="col-sm-4 col-form-label">{{'BOL_Number'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='BOLNumber' [(ngModel)]=BOLNumber id="BOLNumber" [disabled]="isarchived">
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="VehicleNumber" class="col-sm-4 col-form-label">{{'VehicleNumber'|translate}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control form-control-sm" name='VehicleNumber' [(ngModel)]=VehicleNumber id="VehicleNumber" [disabled]="isarchived">
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                        <!-- row end -->

                        <!-- row start -->
                        <div class="row">

                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="Container_Group" class="col-sm-4 col-form-label">{{'Container_Group'|translate}}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group ">
                                            <input type="text" class="form-control form-control-sm" name='Container_Group' [(ngModel)]=Container_Group id="Container_Group"
                                                (blur)="IsValidContainerGroup()" [disabled]="StatusId > 3">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForContainerGroup('CT')" [disabled]="StatusId > 3">
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->

                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <label for="ShipmentProcess" class="col-sm-4 col-form-label">{{'ShipmentProcess'|translate}}</label>
                                    <div class="col-sm-8">
                                        <div class="input-group ">
                                            <input type="text" class="form-control form-control-sm" name='shpProcess' [(ngModel)]=shpProcess id="shpProcess" [disabled]=true>
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="updateShipmentProcessArray()">
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->

                            <!-- col start -->
                            <div class="col-sm-4">
                                <div class="form-group row">
                                    <div class="col-sm-12">
                                        <div class="custom-control custom-checkbox minus-m5">
                                            <input type="checkbox" id="UseContainer" (change)="onCheckChange()" class="custom-control-input" name="UseContainer" [(ngModel)]=UseContainer
                                                [disabled]=true/>
                                            <label class="custom-control-label" for="UseContainer">{{'Cont_Shipment'|translate}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                        <!-- row end -->
                    </div>
                    <!--/ Shipment Form  -->
                </div>
            </div>
            <div>
                <a class="toggle-anchor" (click)="showShipDetails(0)">
                    <span [ngClass]="{kiarrowchevrondown:showShipDetailsEnable[0]}" class="k-icon k-i-arrow-chevron-right" role="presentation"></span>
                    <span class="toggle-anchor-text"> {{'ShipmentDetails'|translate}}</span>
                </a>
            </div>
            <div class="toggle-anchor-details" *ngIf="showShipDetailsEnable[0]">
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <!-- Shipment Lines -->
                        <div class="card shipment-widget-box">
                            <h5 class="card-header">{{'Shipment_Lines'|translate}}</h5>
                            <div class="card-body">
                                <kendo-grid [data]="shipmentLines" [selectable]="true" [resizable]="true" [height]="gridheight" [pageSize]="pageSize1" [skip]="skip"
                                    [pageable]="pagable1" (selectionChange)="onRowSelection($event)">
                                    <kendo-grid-column field="OPTM_SHIPMENTID" class="text-right" width="85" title="{{'PT_ShipmentId'|translate}}" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_LINEID" class="text-right" width="95" title="{{'Shipment_Lines'|translate}}" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_ITEMCODE" width="100" title="{{'ItemCode'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_QTY" class="text-right" width="70" title="{{'Quantity'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_QTY_FULFILLED" width="100" title="{{'Quantity_Fulfilled'|translate}}" class="text-right">

                                    </kendo-grid-column>
                                    <kendo-grid-column field="OPTM_STATUS" width="100" title="{{'Line_status'|translate}}"></kendo-grid-column>
                                </kendo-grid>
                            </div>
                        </div>
                        <!--/ Shipment Lines -->
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <!-- Sales Order Details -->
                        <div class="card shipment-widget-box">
                            <h5 class="card-header">{{'SalesOrderDetails'|translate}}</h5>
                            <div class="card-body">
                                <kendo-grid [data]="SODetails" [resizable]="true" [pageSize]="pageSize2" [skip]="skip" [height]="gridheight" [pageable]="pagable2">
                                    <kendo-grid-column field="OPTM_SHIPMENTID" title="{{'PT_ShipmentId'|translate}}" class="text-right" width="75" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_DTLLINEID" title="{{'Shipment_Lines'|translate}}" class="text-right" width="90" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_SONO" class="text-right" width="75" title="{{'SONumber'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_SOLINENO" title="{{'SOLine'|translate}}" class="text-right" width="50"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_ITEMCODE" width="100" title="{{'ItemCode'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_SOLINEQTY" title="{{'Quantity'|translate}}" class="text-right" width="60"></kendo-grid-column>
                                </kendo-grid>
                            </div>
                        </div>
                        <!--/ Sales Order Details -->
                    </div>
                </div>
            </div>
            <div *ngIf="UseContainer">
                <a class="toggle-anchor" (click)="showShipDetails(1)">
                    <span [ngClass]="{kiarrowchevrondown:showShipDetailsEnable[1]}" class="k-icon k-i-arrow-chevron-right" role="presentation"></span>
                    <span class="toggle-anchor-text"> {{'ContainerDetails'|translate}}</span>
                </a>
            </div>
            <div *ngIf="showShipDetailsEnable[1] && UseContainer">
                <div class="row">
                    <div class="col-sm-6 col-xs-12">
                        <!-- Shipment Lines -->
                        <div class="card shipment-widget-box">
                            <h5 class="card-header">{{'ShipmentContainers'|translate}}</h5>
                            <div class="card-body">
                                <kendo-grid [data]="ShipContainers" [resizable]="true" [pageSize]="pageSize3" [skip]="skip" [height]="gridheight" [pageable]="pagable3">
                                    <kendo-grid-column field="OPTM_SHIPMENTID" title="{{'PT_ShipmentId'|translate}}" class="text-right" width="75" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column *ngIf="false" field="OPTM_CONTAINERID" title="{{'ContainerId'|translate}}" width="90" class="text-left"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_CONTCODE" title="{{'ContainerCode'|translate}}" width="160"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_CONTTYPE" title="{{'ContainerType'|translate}}" width="90"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_PARENTCONTID" title="{{'Parent_CId'|translate}}" width="100" class="text-right"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_STATUS" title="{{'ContainerStatus'|translate}}" width="90"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_SHIPELIGIBLE" title="{{'ShipEligible'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_PICKED_TOSHIP" title="{{'PickedForShipment'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_WHSE" title="{{'WarehouseCode'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_BIN" title="{{'ContainerBin'|translate}}" width="200"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_WEIGHT" title="{{'Weight'|translate}}" width="75" class="text-right"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_WT_UOM" title="{{'WeightUOM'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_VOLUME" title="{{'Volume'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_VOL_UOM" title="{{'VolumeUOM'|translate}}" width="75"></kendo-grid-column>
                                </kendo-grid>
                            </div>
                        </div>
                        <!--/ Shipment Lines -->
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <!-- Sales Order Details -->
                        <div class="card shipment-widget-box">
                            <h5 class="card-header">{{'ContainerItems'|translate}}</h5>
                            <div class="card-body">
                                <kendo-grid [data]="ContainerItems" [resizable]="true" [pageSize]="pageSize4" [skip]="skip" [height]="gridheight" [pageable]="pagable4">
                                    <kendo-grid-column field="OPTM_SHIPMENT_ID" title="{{'PT_ShipmentId'|translate}}" class="text-right" width="75" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_SHIPMENT_LINEID" title="{{'Shipment_Lines'|translate}}" class="text-right" width="75" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_CONTAINERID" title="{{'ContainerCode'|translate}}" width="160" class="text-left"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_ITEMCODE" title="{{'ItemCode'|translate}}" width="100"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_QUANTITY" title="{{'PartQty'|translate}}" width="75" class="text-right"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_UOM" title="{{'UOM'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_WEIGHT" title="{{'Weight'|translate}}" width="75" class="text-right"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_WT_UOM" title="{{'WeightUOM'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_VOLUME" title="{{'Volume'|translate}}" width="75"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_VOL_UOM" title="{{'VolumeUOM'|translate}}" width="75"></kendo-grid-column>
                                </kendo-grid>
                            </div>
                        </div>
                        <!--/ Sales Order Details -->
                    </div>
                </div>
            </div>
            <div>
                <a class="toggle-anchor" (click)="showShipDetails(2)">
                    <span [ngClass]="{kiarrowchevrondown:showShipDetailsEnable[2]}" class="k-icon k-i-arrow-chevron-right" role="presentation"></span>
                    <span class="toggle-anchor-text"> {{'ItemDetails'|translate}}</span>
                </a>
            </div>
            <div *ngIf="showShipDetailsEnable[2]">
                <div class="row">
                    <div class="col-12">
                        <!-- Sales Order Details -->
                        <div class="card shipment-widget-box">
                            <h5 class="card-header">{{'ShipmentLineDetails'|translate}}</h5>
                            <div class="card-body">
                                <kendo-grid [data]="ShipmentLineDetails" [resizable]="true" [pageSize]="pageSize5" [skip]="skip" [height]="gridheight" [pageable]="pagable5">
                                    <kendo-grid-column field="OPTM_SHIPMENTID" class="text-right" width="85" title="{{'PT_ShipmentId'|translate}}" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_DTLLINEID" class="text-right" width="95" title="{{'Shipment_Lines'|translate}}" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_BINDTLLINEID" width="55" title="{{'LineID'|translate}}" class="text-right" *ngIf=false></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_ITEMCODE" width="95" title="{{'ItemCode'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_BIN" width="95" title="{{'BinCode'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_BTCHSER" width="95" title="{{'BTCH_Number'|translate}}"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_QTY" width="95" title="{{'Quantity'|translate}}" class="text-right"></kendo-grid-column>
                                    <kendo-grid-column field="OPTM_CONTAINER_ID" width="95" title="{{'ContainerCode'|translate}}"></kendo-grid-column>
                                </kendo-grid>
                            </div>
                        </div>
                        <!--/ Sales Order Details -->
                    </div>
                </div>
            </div>

        </div>
        <div class="fix-footer-btnBar">
            <!-- <div class="col-sm-12 col-12">
                    <hr />
                </div> -->
            <div class="col-sm-12 col-12">
                <button type="button" class="btn btn-danger k-button btn-sm btn-icon-with-text" (click)="onCancelClick()">
                    <span class="k-icon k-i-close-outline" role="presentation"></span>
                    {{'Cancel'|translate}}</button>

                <button *ngIf="fromScreen == 'shipment'" class="btn btn-success k-button btn-sm btn-icon-with-text" type="button" (click)="onUpdateClick()">
                    <span role="presentation"></span> {{'CT_Update'|translate}}</button>

                <button *ngIf="fromScreen == 'shipment'" class="btn btn-success k-button btn-sm btn-icon-with-text" type="button" (click)="onScheduleClick()"
                    [disabled]=isScheduledDiabled>
                    <span role="presentation"></span> {{'Schedule'|translate}}</button>

                <button *ngIf="fromScreen == 'shipment'" class="btn btn-success k-button btn-sm btn-icon-with-text" type="button" (click)="OnContainerBtnClick()"
                    [disabled]="StatusId == '1'">
                    <span role="presentation"></span> {{btnText}}</button>

                <button *ngIf="fromScreen == 'archiveddata'" class="btn btn-success k-button btn-sm btn-icon-with-text" type="button" (click)="RestoreFromArchived()">
                    <span role="presentation"></span> {{'RestoreFromArchived'|translate}}</button>

                <div *ngIf="fromScreen == 'shipment'" class="btn-group  toggle-btn-outer">
                    <div class="dropdown show">
                        <a class="btn btn-success btn-sm toggle-btn" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <i class="opti-icon-more"></i>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" (click)="onStageORUnstageShipmentClick()" *ngIf="!isStageDiabled">{{'Stage_Unstage'|translate}}</a>
                            <a class="dropdown-item" style="color: gray; cursor: not-allowed; pointer-events: none;" *ngIf="isStageDiabled">{{'Stage_Unstage'|translate}}</a>
                            <a class="dropdown-item">{{'Accept_Return'|translate}}</a>
                            <a class="dropdown-item" (click)="CustomerReturn()">{{'Customer_Return'|translate}}</a>
                            <a class="dropdown-item" (click)="cancelAndUnassign()">{{'Cancel_Unassign'|translate}}</a>
                            <a class="dropdown-item" (click)="TransferFromArchive()">{{'TransferFromArchive'|translate}}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

</div>

<span [hidden]="hideLookup">
    <app-common-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupkey)="getlookupSelectedItem($event)"></app-common-lookup>
</span>

<span *ngIf="showConfirmDialog">
    <app-comon-confirm-dialog [titleMessage]="dialogMsg" [yesButtonText]="yesButtonText" [fromWhere]="dialogFor" [noButtonText]="noButtonText"
        (isYesClick)="getConfirmDialogValue($event)"></app-comon-confirm-dialog>
</span>

<div class="opti_loader full-section" *ngIf="showLoader">
    <div class="opti_spinner"></div>
</div>

<kendo-dialog [width]="500" *ngIf="dialogOpened" (close)="close_kendo_dialog()">
    <div class="new-custom-grid">
        <kendo-dialog-titlebar>
            {{'ScanContAssignShp'|translate}}
        </kendo-dialog-titlebar>
        <div class="px-3">
            <div class="form-group row mt-2">
                <div class="input-group input-group-sm">
                    <label class="col-sm-4 col-form-label">{{'ContainerCode'|translate}}</label>
                    <input type="text" id="containerCode" name="containerCode" class="col-sm-8 form-control form-control-sm mr-3" [(ngModel)]="containerCode"
                        placeholder="{{'Enter_Container_Code'|translate}}" (blur)="generateContainer()">
                </div>
            </div>
        </div>

        <kendo-dialog-actions>
            <button class="ml-1" kendoButton (click)="onConfirmClick()" primary="true">Confirm</button>
        </kendo-dialog-actions>
    </div>
</kendo-dialog>

<kendo-dialog [width]="850" [height]="550" *ngIf="ArchiveDialog" (close)="close_Archive_dialog()">
    <div class="new-custom-grid">
        <kendo-dialog-titlebar>
            {{'TransferFromArchive'|translate}}
        </kendo-dialog-titlebar>

        <div class="opti_container position-relative bg-white rounded">
            <form class="form-with-fix-btnBar">
                <div class="opti_container_inner" [perfectScrollbar]=" ">

                    <div class="col-12">
                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="ShipIdFrom" class="col-sm-5 col-form-label">{{'PT_ShipmentIdFrom'|translate}}</label>
                                    <div class="col-sm-7">
                                        <div class="input-group ">
                                            <input #shipIdFrom id="ShipIdFrom" type="text" class="form-control form-control-sm" name='ShipmentCodeFrom' [(ngModel)]="ShipmentCodeFrom"
                                                 (blur)="IsValidArchiveShipmentCode('ShipIdFrom')">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForShipmentId('ShipIdFrom')" >
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->

                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="SOTo" class="col-sm-5 col-form-label">{{'PT_ShipmentIdTo'|translate}}</label>
                                    <div class="col-sm-7">
                                        <div class="input-group ">
                                            <input #shipIdTo id="ShipIdTo" type="text" class="form-control form-control-sm" name='ShipmentCodeTo' [(ngModel)]="ShipmentCodeTo"
                                                [disabled]=isSHIdDisabled (blur)="IsValidShipmentCode('ShipIdTo')">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForShipmentId('ShipIdTo')" [disabled]=isSHIdDisabled>
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                    </div>

                    <div class="col-12">
                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="CustomerFrom" class="col-sm-5 col-form-label">{{'Customer_From'|translate}}</label>
                                    <div class="col-sm-7">
                                        <div class="input-group ">
                                            <input type="text" #cform class="form-control form-control-sm" name='CustomerFrom' [(ngModel)]="CustomerFrom" id="CustomerFrom"
                                                (blur)="IsValidCustomerCode('CustFrom')">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForCustomer('CustFrom')" [disabled]=isUpdate>
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="CustomerTo" class="col-sm-5 col-form-label">{{'Customer_To'|translate}}</label>
                                    <div class="col-sm-7">
                                        <div class="input-group ">
                                            <input type="text" #custTo class="form-control form-control-sm" name='CustomerTo' [(ngModel)]="CustomerTo" id="CustomerTo"
                                                (blur)="IsValidCustomerCode('CustTo')">
                                            <div class="input-group-append has-seprate-btn">
                                                <button tabIndex="-1" class="k-button k-primary btn" type="button" (mousedown)="GetDataForCustomer('CustTo')" [disabled]=isUpdate>
                                                    <i class="opti-icon-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                    </div>

                    <div class="col-12">
                        <!-- row start -->
                        <div class="row">
                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="Schedule_DatetimeFrom" class="col-sm-5 col-form-label">{{'Schedule_DatetimeFrom'|translate}}</label>
                                    <div class="col-sm-7">
                                        <kendo-datepicker [(ngModel)]=Schedule_DatetimeFrom name="Schedule_DatetimeFrom" [format]=dateFormat placeholder={{dateFormat}}></kendo-datepicker>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->

                            <!-- col start -->
                            <div class="col-sm-6">
                                <div class="form-group row">
                                    <label for="Schedule_DatetimeTo" class="col-sm-5 col-form-label">{{'Schedule_DatetimeTo'|translate}}</label>
                                    <div class="col-sm-7">
                                        <kendo-datepicker name="Schedule_DatetimeTo" [(ngModel)]=Schedule_DatetimeTo [format]=dateFormat placeholder={{dateFormat}}></kendo-datepicker>
                                    </div>
                                </div>
                            </div>
                            <!-- col end -->
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="col-sm-4 row">
                            <div class="form-group">
                                <div>
                                    <button type="button" (click)="onQueryBtnClick()">{{'Query'|translate}}</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-12">
                            <kendo-grid [kendoGridBinding]="ArchiveShipments" [resizable]="true" [height]="250" [pageSize]="pageSize" [pageable]="ShowGridPaging"
                                [selectable]="{ checkboxOnly: true, mode: 'multiple' }" [filterable]="isColumnFilterView">
                                <ng-template kendoGridToolbarTemplate>
                                    <span class="grid-toolbar-title">{{'ShipmentDetails'|translate}}</span>
                                    <!-- <label class="custom-checkbox mb-0 mr-2 filter-checkbox">
                                        <input #chkFilterView type="checkbox" (change)="onFilterChange(chkFilterView,ContainerItems)" id="FilterColumnView" [(ngModel)]="isColumnFilterView"
                                            class="k-checkbox" name="FilterColumnView" />
                                        <label class="k-checkbox-label" for="FilterColumnView">{{'Enable_Filter'|translate}}</label>
                                    </label> -->
                                </ng-template>

                                <kendo-grid-checkbox-column title="{{'Select'|translate}}" [width]="25">
                                    <ng-template kendoGridHeaderTemplate let-column let-rowIndex="rowIndex">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" name="parent_checkbox" #Selectallcheckedvalue (change)="on_Selectall_checkbox_checked(Selectallcheckedvalue.checked)"
                                                [checked]=selectall id="parent_checkbox_{{rowIndex}}" class="custom-control-input"
                                                [disabled]="Selectedlink == 1">
                                            <label class="custom-control-label" for="parent_checkbox_{{rowIndex}}"></label>
                                        </div>
                                    </ng-template>
                                    <ng-template kendoGridCellTemplate let-idx='rowIndex' let-dataItem='dataItem'>
                                        <div class="custom-control custom-checkbox">
                                            <input #chkSelection type="checkbox" (change)="selectContainerRowChange(chkSelection.checked, dataItem, idx)" [checked]="dataItem.Selected"
                                                [disabled]="Selectedlink == 1" id="chkbox-{{idx}}" class="custom-control-input"
                                                name="columnfilter" />
                                            <label class="custom-control-label" for="chkbox-{{idx}}"></label>
                                        </div>
                                    </ng-template>
                                </kendo-grid-checkbox-column>
                                <kendo-grid-column field="OPTM_SHIPMENT_CODE" class="text-left" width="155" title="{{'Shipment_Code'|translate}}"></kendo-grid-column>
                                <kendo-grid-column field="OPTM_BPCODE" width="85" title="{{'Outbound_Customer'|translate}}"></kendo-grid-column>
                                <kendo-grid-column field="OPTM_SHIPTO" width="95" title="{{'ShipTo'|translate}}"></kendo-grid-column>
                                <kendo-grid-column field="OPTM_SHIPDATE" width="100" title="{{'ShipDate'|translate}}"></kendo-grid-column>
                                <kendo-grid-column field="OPTM_QUANTITY" class="text-right" width="70" title="{{'Shipment_Qty'|translate}}"></kendo-grid-column>
                            </kendo-grid>

                            <!-- </div> -->
                        </div>
                    </div>
                </div>

                <div class="fix-footer-btnBar">
                    <div class="col-sm-12 col-12">
                        <button type="button" class="btn btn-danger k-button btn-sm btn-icon-with-text" (click)="close_Archive_dialog()">
                            <span class="k-icon k-i-close-outline" role="presentation"></span>
                            {{'Cancel'|translate}}</button>

                        <button class="btn btn-success k-button btn-sm btn-icon-with-text" type="button" (click)="RestoreFromArchived()">
                            <span role="presentation"></span> {{'TransfertoactiveShp'|translate}}</button>
                    </div>
                </div>
            </form>
        </div>

        <span [hidden]="hideArchiveLookup">
                <app-common-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupkey)="getlookupdetail($event)"></app-common-lookup>
            </span>
            <div class="opti_loader full-section" *ngIf="showArchLoader">
                    <div class="opti_spinner"></div>
                </div>
    </div>
</kendo-dialog>