<div class="opti_container position-relative bg-white rounded">
    <form class="form-with-fix-btnBar" *ngIf="!viewLines">
        <div class="opti_container_inner" [perfectScrollbar]=" ">

            <h3 class="border-bottom d-flex pt-1 pb-3 mb-4">
                {{'AddItemToCont'|translate}}
            </h3>
            <div class="col-12 row">
                <div class="col-sm-6">
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'Purpose'|translate}}</label>
                            <kendo-dropdownlist class="form-control form-control-sm" [data]="purposeArray"
                                textField="Name" valueField="Value" id="purpose" name="purpose"
                                [(ngModel)]="defaultPurpose" #selectedvalue
                                (selectionChange)="onPurposeSelectChange($event)"></kendo-dropdownlist>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'Warehouse'|translate}}</label>
                            <input type="text" id="whse" name="whse" class="col-sm-8 form-control form-control-sm"
                                [(ngModel)]="whse" placeholder="{{'Warehouse'|translate}}" (blur)="onWhseChangeBlur()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="GetWhseCode()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'BinCode'|translate}}</label>
                            <input type="text" id="binNo" name="binNo" class="col-sm-8 form-control form-control-sm"
                                [(ngModel)]="binNo" placeholder="{{'BinCode'|translate}}" (blur)="onBinChangeBlur()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="GetBinCode()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'ContainerType'|translate}}</label>
                            <input type="text" class="form-control form-control-sm" id="containerType"
                                name="containerType" [(ngModel)]="containerType"
                                placeholder="{{'ContainerType'|translate}}" (blur)="onContainerTypeChangeBlur()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="getContainerType()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row" *ngIf="false">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'CTR_Parent_CT'|translate}}</label>
                            <input type="text" id="parentContainerType" name="parentContainerType"
                                class="col-sm-8 form-control form-control-sm" [(ngModel)]="parentContainerType"
                                placeholder="{{'CTR_Parent_CT'|translate}}" (blur)="onParentContainerChange()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="getParentContainerType()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'AutoPackRule'|translate}}</label>
                            <input type="text" id="autoRuleId" name="autoRuleId"
                                class="col-sm-8 form-control form-control-sm" [(ngModel)]="autoRuleId"
                                placeholder="{{'AutoPackRule'|translate}}" (blur)="onAutoPackRuleChangeBlur()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="getAutoPackRule()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'ContainerGroupingCode'|translate}}</label>
                            <input type="text" id="containerGroupCode" name="containerGroupCode"
                                class="col-sm-8 form-control form-control-sm" [(ngModel)]="containerGroupCode"
                                placeholder="{{'ContainerGroupingCode'|translate}}"
                                (blur)="IsValidContainerGroupBlur()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (click)="GetDataForContainerGroup()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'SONumber'|translate}}</label>
                            <input type="text" id="soNumber" name="soNumber"
                                class="col-sm-8 form-control form-control-sm" [(ngModel)]="soNumber"
                                placeholder="{{'SONumber'|translate}}" (blur)="onSONumberChange()">
                            <div class="input-group-append has-seprate-btn">
                                <button tabIndex="-1" class="k-button k-primary btn" type="button"
                                    (mousedown)="getSOrderList()">
                                    <i class="opti-icon-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="input-group input-group-sm">
                            <label class="col-sm-4 col-form-label">{{'NoOfPackToGen'|translate}}</label>
                            <input type="text" id="noOfPack" name="noOfPack"
                                class="col-sm-8 form-control form-control-sm text-right" [(ngModel)]="noOfPack"
                                placeholder="{{'NoOfPackToGen'|translate}}" disabled>
                        </div>
                    </div>

                    <div class="col-sm-12 mt-3">
                        <div class="row">
                            <div class="card row">
                                <div class="pl-3 pt-1 pr-3 pb-1">
                                    <h4 class="border-bottom d-flex mt-2">
                                        {{'ScanAndAddTtl'|translate}}
                                    </h4>
                                </div>
                                <div class="row pb-3 pr-3">
                                    <div class="form-group col-12">
                                        <div class="input-group input-group-sm">
                                            <label
                                                class="col-sm-3 ml-1 col-form-label row">{{'Cont_Code'|translate}}</label>
                                            <input type="text" id="containerCode" name="containerCode"
                                                class="col-sm-6 form-control form-control-sm"
                                                [(ngModel)]="containerCode" (blur)="onContainerCodeChange()">
                                            <input type="text" id="containerStatus" name="containerStatus"
                                                class="col-sm-3 ml-3 form-control form-control-sm"
                                                [(ngModel)]="containerStatus" disabled>
                                        </div>
                                    </div>

                                    <div class="form-group row col-12 ml-3 mt-2">
                                        <div class="col-sm-6">
                                            <fieldset class="d-block w-100">
                                                <div class="d-flex align-items-center w-100">
                                                    <div class="d-flex align-items-center"
                                                        (mousedown)="onRadioMouseDown('add')">
                                                        <input type="radio" #addItem name="addItem" id="addItem"
                                                            (click)="handleCheckChange($event)" class="k-radio"
                                                            [checked]="radioSelected == 1" />
                                                        <label class="k-radio-label"
                                                            for="addItem">{{'CT_Add'|translate}}</label>
                                                    </div>
                                                    <div class="d-flex align-items-center ml-3"
                                                        (mousedown)="onRadioMouseDown('remove')">
                                                        <input type="radio" #removeItem name="removeItem"
                                                            id="removeItem" class="k-radio"
                                                            (click)="handleCheckChange($event)"
                                                            [checked]="radioSelected == 2" />
                                                        <label class="k-radio-label"
                                                            for="removeItem">{{'Remove'|translate}}</label>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="input-group input-group-sm">
                                                <label
                                                    class="col-sm-5 col-form-label text-right">{{'Balance_Qty'|translate}}</label>
                                                <input type="text" id="itemBalanceQty" name="itemBalanceQty"
                                                    class="col-sm-7 form-control form-control-sm text-right"
                                                    [ngModel]="itemBalanceQty|numberFormat"
                                                    (ngModelChange)="itemBalanceQty=$event" disabled>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group row col-12 ml-3 mt-2">
                                        <div class="input-group input-group-sm">
                                            <label class="col-sm-3 col-form-label row">{{'ScanItem'|translate}}</label>
                                            <input type="text" id="scanItemCode" name="scanItemCode"
                                                class="col-sm-3 form-control form-control-sm mr-3"
                                                [(ngModel)]="scanItemCode" (blur)="onItemCodeChange()"
                                                [attr.disabled]="disableFields?'':null">
                                            <label class="col-sm-3 col-form-label text-right">{{'ScanQty'|translate}}</label>
                                            <input type="number" id="itemQty" name="itemQty"
                                                class="col-sm-3 form-control form-control-sm text-right"
                                                [ngModel]="itemQty|numberFormat" (ngModelChange)="itemQty=$event"
                                                (blur)="onItemQtyChange()">
                                        </div>
                                    </div>

                                    <div class="form-group row col-12 ml-3 mt-1" *ngIf="bsVisible">
                                        <div class="input-group input-group-sm">
                                            <label class="col-sm-3 col-form-label row">{{'Bat/Ser'|translate}}</label>
                                            <input type="text" id="scanBSrLotNo" name="scanBSrLotNo"
                                                class="col-sm-3 form-control form-control-sm mr-3"
                                                [(ngModel)]="scanBSrLotNo" (blur)="IsValidBtchSer()"
                                                [disabled]="autoRuleId != '' && SetItemQty == 0 && radioSelected == 1">
                                            <label class="col-sm-3 col-form-label text-right">{{'ScanQty'|translate}}</label>
                                            <input type="number" id="bsItemQty" name="bsItemQty"
                                                class="col-sm-3 form-control form-control-sm text-right"
                                                [ngModel]="bsItemQty|numberFormat" (ngModelChange)="bsItemQty=$event"
                                                (blur)="onBSQtyChange()">
                                        </div>
                                    </div>

                                    <!-- <div class="fix-footer-btnBar">
                                        <div class="col-12">
                                            <div class="float-right form-group row">
                                                <div class="input-group input-group-sm">
                                                    <button type="button"
                                                        class="k-button k-primary k-button btn-sm btn-icon-with-text"
                                                        disabled>
                                                        {{'PrintLabel'|translate}}
                                                    </button>
                                                    <button type="button"
                                                        class="k-button k-primary k-button btn-sm btn-icon-with-text ml-1 mr-2"
                                                        (click)="onUpdateClick()">
                                                        {{'Confirm'|translate}}
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-12">
                            <div class="wizard-container">
                                <div class="wizard-box">
                                    <div class="wizard-content">
                                        <kendo-treeview [nodes]="data" textField="text" kendoTreeViewExpandable
                                            kendoTreeViewSelectable kendoTreeViewHierarchyBinding childrenField="items">
                                            <!-- [expandBy]="'level'"  [(expandedKeys)]="expandedKeys" -->
                                            <!-- <ng-template kendoTreeViewNodeTemplate let-dataItem>
                                                <span
                                                    [attr.data-branchtype]="dataItem.branchType">{{dataItem.component}}</span>
                                            </ng-template> -->
                                        </kendo-treeview>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="fix-footer-btnBar">
            <div class="col-sm-12 col-12">
                <button type="button" class="btn btn-danger k-button btn-sm btn-icon-with-text"
                    (mousedown)="onCancelClick()">
                    <span class="k-icon k-i-close-outline" role="presentation"></span>
                    {{'Cancel'|translate}}</button>
                <button type="button" class="k-button k-primary k-button btn-sm btn-icon-with-text ml-1 mr-2"
                    (mousedown)="onUpdateClick()">
                    {{'CT_Update'|translate}}
                </button>
            </div>
        </div>
    </form>
</div>

<span *ngIf="showLookup">
    <app-common-lookup [lookupfor]='lookupfor' [serviceData]='serviceData' (lookupkey)="getLookupDataValue($event)">
    </app-common-lookup>
</span>

<span *ngIf="showConfirmDialog">
    <app-comon-confirm-dialog [titleMessage]="dialogMsg" [yesButtonText]="yesButtonText" [fromWhere]="dialogFor"
        [noButtonText]="noButtonText" (isYesClick)="getConfirmDialogValue($event)"></app-comon-confirm-dialog>
</span>

<div class="opti_loader full-section" *ngIf="showLoader">
    <div class="opti_spinner"></div>
</div>